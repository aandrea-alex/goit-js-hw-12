{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi-x-octagon.svg","../src/img/icons.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__005e8834__\"","export default \"__VITE_ASSET__0c78aa03__\"","\nimport axios from 'axios';\n\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45097431-2d8d6a9f4785bbcc4049d8cdd';\n\nasync function axiosData(url) {\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error(`Failed to fetch data: ${error.message}`);\n  }\n}\n\nasync function getImages(strForSearch,  pageNumber = 1) {\n  const apiParams = {\n    key: API_KEY,\n    q: encodeURIComponent(strForSearch),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: pageNumber,\n    per_page: 15,\n  };\n\n  const url = `${API_URL}?${new URLSearchParams(apiParams).toString()}`;\n  try {\n    const data = await axiosData(url);\n\n    if (!data.hits.length) {\n      return Promise.reject(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n    }\n    return Promise.resolve(data);\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n\nexport default getImages;\n\n","const cardMarkup = card => {\n  const { largeImageURL, previewURL, tags, likes, views, comments, downloads } =\n    card;\n\n  return `<li class='card'> \n              <a class='card-link' href='${largeImageURL}'>                    \n                <div class='card-cover-inner'>                \n                    <img class='card-cover'\n                        src='${previewURL}'\n                        alt='${tags}'                                                          \n                    />                                                  \n                  <div class='card-cover-darkened'></div>\n                </div>\n              </a>                 \n              <div class=\"card-info\">\n                  <div class=\"field\">\n                      <span class=\"label\">Likes</span>\n                      <span class=\"value\">${likes}</span>    \n                  </div>\n                  <div class=\"field\">\n                      <span class=\"label\">Views</span>\n                      <span class=\"value\">${views}</span>   \n                  </div>\n                  <div class=\"field\">\n                      <span class=\"label\">Comments</span>\n                      <span class=\"value\">${comments}</span>    \n                  </div>\n                  <div class=\"field\">\n                      <span class=\"label\">Downloads</span>\n                      <span class=\"value\">${downloads}</span>    \n                  </div>\n              </div>\n          </li>`;\n};\n\nfunction createCardsMarkup(cards) {\n  return cards.map(cardMarkup).join('');\n}\n\nfunction createCadsGallery(cardsArray, galleryRef) {\n  const cardsMarkup = createCardsMarkup(cardsArray);\n  galleryRef.innerHTML = '';\n  galleryRef.insertAdjacentHTML('beforeend', cardsMarkup);\n}\n\nexport default createCadsGallery;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconXUrl from './img/bi-x-octagon.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '../src/css/layout/simple-lightbox-window.css';\nimport iconsUrl from '../src/img/icons.svg';\nimport getImages from './js/pixabay-api.js';\nimport createCadsGallery from './js/render-functions.js';\n\nconst galleryRef = document.querySelector('.gallery');\nconst loaderRef = document.querySelector('.loader');\nconst searchForm = document.querySelector('.search-form');\nconst moreBtn = document.getElementById('morePageBtn');\n\nmoreBtn.addEventListener('click', onMoreBtnClick);\nmoreBtn.style.display = 'none';\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nlet currentPage = 1;\nlet maxPages = 0;\nlet searchStr = '';\nlet images = [];\n\nlet slBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  nav: true,\n  navText: [\n    `<svg class=\"lightbox-button-icon-prev\" width=\"24\" height=\"24\" aria-label=\"icon arrow left\">\n          <use href=\"${iconsUrl}#icon-chevron-left\"></use>\n        </svg>`,\n    `<svg class=\"lightbox-button-icon-next\" width=\"24\" height=\"24\" aria-label=\"icon arrow right\">\n          <use href=\"${iconsUrl}#icon-chevron-right\"></use>\n        </svg>`,\n  ],\n  close: true,\n  closeText: `\n        <svg class=\"lightbox-close-icon\" width=\"16\" height=\"16\">\n          <use href=\"${iconsUrl}#close-form\"></use>\n        </svg>`,\n  enableKeyboard: true,\n  showCounter: true,\n  animationSlide: true,\n  loop: true,\n});\n\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n  searchStr = event.currentTarget.search.value.trim();\n  if (searchStr === '') return;\n\n  reset();\n  loaderRef.style.display = 'block';\n\n  getImages(searchStr, currentPage)\n    .then(data => refreshOnSuccess(data))\n    .catch(msg => refreshOnError(msg))\n    .finally(() => {\n      loaderRef.style.display = 'none';\n      updateMoreBtn();\n    });\n}\n\nfunction refreshOnError(msg) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  // createErrMsg(msg);\n  galleryRef.style.backgroundColor = '#f5f5f5';\n  galleryRef.innerHTML = '';\n  slBox.refresh();\n}\n\nfunction refreshOnSuccess(data) {\n  galleryRef.style.backgroundColor = '#ffffff';\n  maxPages = Math.ceil(data.totalHits / 15);\n  images.push(...data.hits);\n  currentPage += 1;\n  createCadsGallery(images, galleryRef);\n\n  slBox && slBox.refresh();\n}\n\nfunction createErrMsg(msg) {\n  iziToast.show({\n    message: msg,\n    messageColor: '#fafafb',\n    messageSize: '16px',\n    backgroundColor: '#fc5a5a',\n    position: 'topRight',\n    closeOnEscape: true,\n    close: true,\n    icon: 'Icomoon',\n    iconUrl: `${iconXUrl}`,\n    iconColor: '#fafafb',\n  });\n}\n\nfunction onMoreBtnClick() {\n  loaderRef.style.display = 'block';\n  moreBtn.style.visible = 'none';\n\n  getImages(searchStr, currentPage)\n    .then(data => refreshOnSuccess(data))\n    .catch(msg => refreshOnError(msg))\n    .finally(() => {\n      loaderRef.style.display = 'none';\n      moreBtn.style.visible = 'block';\n      updateMoreBtn();\n    });\n}\n\nfunction updateMoreBtn() {\n  moreBtn.style.display = images.length > 0 ? 'block' : 'none';\n  if (currentPage >= maxPages) {\n    moreBtn.style.display = 'none';\n    if (maxPages > 1) {\n      createErrMsg(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  }\n}\n\nfunction reset() {\n  currentPage = 1;\n  maxPages = 0;\n  images = [];\n}\n"],"names":["iconXUrl","iconsUrl","API_URL","API_KEY","axiosData","url","axios","error","getImages","strForSearch","pageNumber","apiParams","data","cardMarkup","card","largeImageURL","previewURL","tags","likes","views","comments","downloads","createCardsMarkup","cards","createCadsGallery","cardsArray","galleryRef","cardsMarkup","loaderRef","searchForm","moreBtn","onMoreBtnClick","onSearchFormSubmit","currentPage","maxPages","searchStr","images","slBox","SimpleLightbox","event","reset","refreshOnSuccess","msg","refreshOnError","updateMoreBtn","createErrMsg","iziToast"],"mappings":"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"}