{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi-x-octagon.svg","../src/img/icons.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__005e8834__\"","export default \"__VITE_ASSET__0c78aa03__\"","\nimport axios from 'axios';\n\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45097431-2d8d6a9f4785bbcc4049d8cdd';\n\nasync function axiosData(url) {\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error(`Failed to fetch data: ${error.message}`);\n  }\n}\n\nfunction getImages(strForSearch,  pageNumber = 1) {\n  const apiParams = {\n    key: API_KEY,\n    q: encodeURIComponent(strForSearch),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: pageNumber,\n    per_page: 15,\n  };\n\n  const url = `${API_URL}?${new URLSearchParams(apiParams).toString()}`;\n  return new Promise((resolve, reject) => {\n    axiosData(url)\n      .then(data => {\n        if (!data.hits.length) {\n          reject(\n            'Sorry, there are no images matching your search query. Please, try again!'\n          );\n        }\n        resolve(data.hits);\n      })\n      .catch(error => {\n        reject(`Error fetching images: ${error.message}`);\n      });\n  });\n}\n\nexport default getImages;\n","const cardMarkup = card => {\n  const { largeImageURL, previewURL, tags, likes, views, comments, downloads } =\n    card;\n\n  return `<li class='card'> \n              <a class='card-link' href='${largeImageURL}'>                    \n                <div class='card-cover-inner'>                \n                    <img class='card-cover'\n                        src='${previewURL}'\n                        alt='${tags}'                                                          \n                    />                                                  \n                  <div class='card-cover-darkened'></div>\n                </div>\n              </a>                 \n              <div class=\"card-info\">\n                  <div class=\"field\">\n                      <span class=\"label\">Likes</span>\n                      <span class=\"value\">${likes}</span>    \n                  </div>\n                  <div class=\"field\">\n                      <span class=\"label\">Views</span>\n                      <span class=\"value\">${views}</span>   \n                  </div>\n                  <div class=\"field\">\n                      <span class=\"label\">Comments</span>\n                      <span class=\"value\">${comments}</span>    \n                  </div>\n                  <div class=\"field\">\n                      <span class=\"label\">Downloads</span>\n                      <span class=\"value\">${downloads}</span>    \n                  </div>\n              </div>\n          </li>`;\n};\n\nfunction createCardsMarkup(cards) {\n  return cards.map(cardMarkup).join('');\n}\n\nfunction createCadsGallery(cardsArray, galleryRef) {\n  const cardsMarkup = createCardsMarkup(cardsArray);\n  galleryRef.innerHTML = '';\n  galleryRef.insertAdjacentHTML('beforeend', cardsMarkup);\n}\n\nexport default createCadsGallery;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconXUrl from './img/bi-x-octagon.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '../src/css/layout/simple-lightbox-window.css';\nimport iconsUrl from '../src/img/icons.svg';\nimport getImages from './js/pixabay-api.js';\nimport createCadsGallery from './js/render-functions.js';\n\nconst galleryRef = document.querySelector('.gallery');\nconst loaderRef = document.querySelector('.loader');\nconst searchForm = document.querySelector('.search-form');\nconst moreBtn = document.getElementById('morePageBtn');\n\nmoreBtn.addEventListener('click', onMoreBtnClick);\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nlet currentPage = 1;\n\nlet slBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  nav: true,\n  navText: [\n    `<svg class=\"lightbox-button-icon-prev\" width=\"24\" height=\"24\" aria-label=\"icon arrow left\">\n          <use href=\"${iconsUrl}#icon-chevron-left\"></use>\n        </svg>`,\n    `<svg class=\"lightbox-button-icon-next\" width=\"24\" height=\"24\" aria-label=\"icon arrow right\">\n          <use href=\"${iconsUrl}#icon-chevron-right\"></use>\n        </svg>`,\n  ],\n  close: true,\n  closeText: `\n        <svg class=\"lightbox-close-icon\" width=\"16\" height=\"16\">\n          <use href=\"${iconsUrl}#close-form\"></use>\n        </svg>`,\n  enableKeyboard: true,\n  showCounter: true,\n  animationSlide: true,\n  loop: true,\n});\n\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n  loaderRef.style.display = 'block';\n  const searchStr = event.currentTarget.search.value.trim();\n  getImages(searchStr, currentPage)\n    .then(data => refreshOnSuccess(data))\n    .catch(msg => refreshOnError(msg));\n}\n\nfunction refreshOnError(msg) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  createErrMsg(msg);\n  galleryRef.style.backgroundColor = '#f5f5f5';\n  galleryRef.innerHTML = '';\n  slBox.refresh();\n}\n\nfunction refreshOnSuccess(data) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  galleryRef.style.backgroundColor = '#ffffff';\n  createCadsGallery(data, galleryRef);\n  slBox.refresh();\n}\n\nfunction createErrMsg(msg) {\n  iziToast.show({\n    message: msg,\n    messageColor: '#fafafb',\n    messageSize: '16px',\n    backgroundColor: '#fc5a5a',\n    position: 'topRight',\n    closeOnEscape: true,\n    close: true,\n    icon: 'Icomoon',\n    iconUrl: `${iconXUrl}`,\n    iconColor: '#fafafb',\n  });\n}\n\nfunction onMoreBtnClick() {\n  currentPage += 1;\n  // this.#loader.style.display = 'block';\n  // this.#moreBtn.style.visible = 'none';\n  // this.#fnGetImages(this.#searchStr, nextPage)\n  //   .then(images => {\n  //     this.addData(images.hits, this.#maxPages, this.#searchStr);\n  //   })\n  //   .catch(error => {\n  //     createErrMsg(error);\n  //     this.#moreBtn.style.display = 'none';\n  //   })\n  //   .finally(() => {\n  //     this.#loader.style.display = 'none';\n  //     this.#boxRef && this.#boxRef.refresh();\n  //     this.#moreBtn.style.visible = 'flex';\n  //   });\n}\n\n"],"names":["iconXUrl","iconsUrl","API_URL","API_KEY","axiosData","url","axios","error","getImages","strForSearch","pageNumber","apiParams","resolve","reject","data","cardMarkup","card","largeImageURL","previewURL","tags","likes","views","comments","downloads","createCardsMarkup","cards","createCadsGallery","cardsArray","galleryRef","cardsMarkup","loaderRef","searchForm","moreBtn","onMoreBtnClick","onSearchFormSubmit","currentPage","slBox","SimpleLightbox","event","searchStr","refreshOnSuccess","msg","refreshOnError","createErrMsg","iziToast"],"mappings":"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"}